#!/bin/withenv sh


#======================================================================================================================
# Run preflight checks
#======================================================================================================================

MOD=${1}
nu -c "use bf-${MOD} run ; run preflight"


#======================================================================================================================
# Exit shell gracefully if the preflight has exited early.
#======================================================================================================================

VAR=${MOD}_PREFLIGHT_EARLY_EXIT
if bf-env-check --reload ${VAR} ; then
    bf-env-unset ${VAR}
    exit 0
fi
